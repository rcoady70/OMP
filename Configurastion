oh-my-posh init pwsh --config "https://gist.githubusercontent.com/rcoady70/60c5d900d30d30980fef084128b50da6/raw/76ae1c8993c56299d1184f5008f1262dc067d885/ardalis.omp.json" | Invoke-Expression

# Chocolatey profile (unchanged)
$ChocolateyProfile = "$env:ChocolateyInstall\helpers\chocolateyProfile.psm1"
if (Test-Path($ChocolateyProfile)) {
  Import-Module "$ChocolateyProfile"
}

# Remove the built-in cd alias so our function takes over
if (Test-Path alias:cd) {
    Remove-Item alias:cd
}

# Enable using 'cd -' to return to previous location
function cd {
    param([string]$path = $HOME)

    if ($path -eq '-') {
        if ($global:OLDPWD) {
            $tmp = $PWD.Path
            Set-Location $global:OLDPWD
            $global:OLDPWD = $tmp
        } else {
            Write-Host "No previous directory found."
        }
        return
    }

    $global:OLDPWD = $PWD.Path

    if (Test-Path $path -PathType Container) {
        Set-Location $path
    }
    else {
        Write-Host "cd: path not found: $path"
    }
}

# Only jump to C:\dev if we started in our home folder
if ($PWD.Path -ieq $HOME) {
    cd "C:\dev"
}