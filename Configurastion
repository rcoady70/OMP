#oh-my-posh --version
# edit profile  code $Profile

if (Get-Module -ListAvailable -Name posh-git) {
    Import-Module posh-git
}

oh-my-posh init pwsh `
  --config https://raw.githubusercontent.com/rcoady70/OMP/main/OhMyPosh.json `
  | Invoke-Expression

 # Only jump to repo if we started in our home folder
if ($PWD.Path -ieq $HOME) {
    cd "C:\Users\RichardCoady\repos\HelliosCFA\Hellios.Odyssey"
}

# Remove the built-in cd alias so our function takes over
if (Test-Path alias:cd) {
    Remove-Item alias:cd
}

# Enable using 'cd -' to return to previous location
function cd {
    param([string]$path = $HOME)

    if ($path -eq '-') {
        if ($global:OLDPWD) {
            $tmp = $PWD.Path
            Set-Location $global:OLDPWD
            $global:OLDPWD = $tmp
        } else {
            Write-Host "No previous directory found."
        }
        return
    }

    $global:OLDPWD = $PWD.Path

    if (Test-Path $path -PathType Container) {
        Set-Location $path
    }
    else {
        Write-Host "cd: path not found: $path"
    }
}
